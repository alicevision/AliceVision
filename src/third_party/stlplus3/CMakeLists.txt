project(stlplus C CXX)

FILE(GLOB LIBSLTPLUS_HPP_FILESYSTEM "${CMAKE_CURRENT_SOURCE_DIR}/filesystemSimplified/*.hpp" )
FILE(GLOB LIBSLTPLUS_CPP_FILESYSTEM "${CMAKE_CURRENT_SOURCE_DIR}/filesystemSimplified/*.cpp" )

LIST(APPEND LIBSLTPLUS_SRCS
  ${LIBSLTPLUS_HPP_FILESYSTEM} ${LIBSLTPLUS_CPP_FILESYSTEM})

INCLUDE_DIRECTORIES(./filesystemSimplified)
ADD_LIBRARY(stlplus ${LIBSLTPLUS_SRCS})
SET_PROPERTY(TARGET stlplus PROPERTY FOLDER OpenMVG/3rdParty)

INSTALL(
  TARGETS stlplus
  DESTINATION lib
  EXPORT openMVG-targets
)

IF(STLPLUS_INCLUDE_INSTALL_DIR)
  SET(INCLUDE_INSTALL_DIR ${STLPLUS_INCLUDE_INSTALL_DIR})
ELSE()
  SET(INCLUDE_INSTALL_DIR "${CMAKE_INSTALL_PREFIX}/include/stlplus")
ENDIF()

INSTALL(
  DIRECTORY ./filesystemSimplified
  DESTINATION ${INCLUDE_INSTALL_DIR}
  COMPONENT headers
  FILES_MATCHING PATTERN "*.hpp"
)

